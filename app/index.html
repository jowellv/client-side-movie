<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Client Side</title>
</head>
<body data-ng-app="moviesApp">
  <main data-ng-controller="moviesController" data-ng-init="getAll()">
    <h1>This the MovieDB</h1>
    <aside data-ng-if="errors.length">
      <h2>Errors:</h2>
      <ul data-ng-repeat="error in errors">
        <li>{{error.msg}}</li>
      </ul>
      <button data-ng-click="clearErrors()"> Clear Errors </button>
    </aside>
    <form name="newMovieForm" data-ng-submit="createNewMovie()">
      <input type="text" required data-ng-model="newMovie.name">
      <select data-ng-model="newMovie.genre">
        <option value="action">action</option>
        <option value="adventure">adventure</option>
        <option value="comedy">comedy</option>
        <option value="drama">drama</option>
        <option value="horror">horror</option>
        <option value="war">war</option>
      </select>
      <button type="submit" data-ng-disabled="newMovieForm.$invalid">Create New Movie</button>
    </form>
    <ul data-ng-repeat="movie in movies">
      <li>{{movie.name}} - {{movie.genre}}
        <button data-ng-click="removeMovie(movie)">Delete</button>
        <button data-ng-if="!movie.editing" data-ng-click="movie.editing = true;movie.oldName=movie.name;movie.oldGenre=movie.genre;">Edit</button>
        <form name="{{'editing' + movie._id}}" data-ng-if="movie.editing" data-ng-submit="saveMovie(movie)">
          <input type="text" data-ng-model="movie.name">
          <select data-ng-model="movie.genre">
            <option value="action">action</option>
            <option value="adventure">adventure</option>
            <option value="comedy">comedy</option>
            <option value="drama">drama</option>
            <option value="horror">horror</option>
            <option value="war">war</option>
          </select>
          <button type="submit">Save Changes</button>
          <button data-ng-click="movie.editing=false;movie.name=movie.oldName;movie.genre=movie.oldGenre">Cancel</button>
        </form>
      </li>
    </ul>
  </main>
  <script src="bundle.js"></script>
</body>
</html>
